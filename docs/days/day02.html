<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Day 2 ‚Äì Describing Data ‚Äì Digital Competence in the Biological Sciences</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-dfb324f25d9b1687192fa8be62ac8f9c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../assets/images/course-logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Digital Competence in the Biological Sciences</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../days/day01.html">Course Days</a></li><li class="breadcrumb-item"><a href="../days/day02.html">Day 2 ‚Äì Describing Data</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Digital Competence in the Biological Sciences</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Course Days</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../days/day01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Day 1 ‚Äì What ‚Äògood‚Äô Data Is</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../days/day02.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Day 2 ‚Äì Describing Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../days/day03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Day 3 ‚Äì From repetition to algorithms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../days/day04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Day 4 ‚Äì Cleaning data and making work reproducible</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../days/day05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Day 5 ‚Äì Tools, models, and scientific responsibility</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Reference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references/r-operators.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Operators Cheat Sheet</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#learning-goals" id="toc-learning-goals" class="nav-link active" data-scroll-target="#learning-goals">Learning goals</a></li>
  <li><a href="#motivation" id="toc-motivation" class="nav-link" data-scroll-target="#motivation">Motivation</a></li>
  <li><a href="#agenda" id="toc-agenda" class="nav-link" data-scroll-target="#agenda">Agenda</a></li>
  <li><a href="#from-raw-data-to-summary-statistics" id="toc-from-raw-data-to-summary-statistics" class="nav-link" data-scroll-target="#from-raw-data-to-summary-statistics">From raw data to summary statistics</a>
  <ul class="collapse">
  <li><a href="#measures-of-central-tendency" id="toc-measures-of-central-tendency" class="nav-link" data-scroll-target="#measures-of-central-tendency">Measures of central tendency</a></li>
  <li><a href="#measures-of-variability" id="toc-measures-of-variability" class="nav-link" data-scroll-target="#measures-of-variability">Measures of variability</a></li>
  <li><a href="#the-effect-of-outliers-and-skewness" id="toc-the-effect-of-outliers-and-skewness" class="nav-link" data-scroll-target="#the-effect-of-outliers-and-skewness">The effect of outliers and skewness</a></li>
  </ul></li>
  <li><a href="#distributions-and-visual-summaries" id="toc-distributions-and-visual-summaries" class="nav-link" data-scroll-target="#distributions-and-visual-summaries">Distributions and visual summaries</a>
  <ul class="collapse">
  <li><a href="#the-role-of-visualization" id="toc-the-role-of-visualization" class="nav-link" data-scroll-target="#the-role-of-visualization">The role of visualization</a></li>
  <li><a href="#honest-versus-misleading-plots" id="toc-honest-versus-misleading-plots" class="nav-link" data-scroll-target="#honest-versus-misleading-plots">Honest versus misleading plots</a></li>
  </ul></li>
  <li><a href="#when-excel-falls-short-repetition-and-scalability" id="toc-when-excel-falls-short-repetition-and-scalability" class="nav-link" data-scroll-target="#when-excel-falls-short-repetition-and-scalability">When Excel falls short: repetition and scalability</a></li>
  <li><a href="#first-steps-in-r" id="toc-first-steps-in-r" class="nav-link" data-scroll-target="#first-steps-in-r">First steps in R</a>
  <ul class="collapse">
  <li><a href="#importing-a-dataset-into-r" id="toc-importing-a-dataset-into-r" class="nav-link" data-scroll-target="#importing-a-dataset-into-r">Importing a dataset into R</a></li>
  <li><a href="#summarizing-data-in-r" id="toc-summarizing-data-in-r" class="nav-link" data-scroll-target="#summarizing-data-in-r">Summarizing data in R</a></li>
  <li><a href="#exporting-data-and-results" id="toc-exporting-data-and-results" class="nav-link" data-scroll-target="#exporting-data-and-results">Exporting data and results</a></li>
  </ul></li>
  <li><a href="#wrap-up" id="toc-wrap-up" class="nav-link" data-scroll-target="#wrap-up">Wrap-up</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../days/day01.html">Course Days</a></li><li class="breadcrumb-item"><a href="../days/day02.html">Day 2 ‚Äì Describing Data</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Day 2 ‚Äì Describing Data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="learning-goals" class="level2">
<h2 class="anchored" data-anchor-id="learning-goals">Learning goals</h2>
<p>By the end of this day, you should be able to:</p>
<ul>
<li>calculate and interpret basic summary statistics (mean, median, variance, etc.)</li>
<li>describe the variability and distribution of a dataset</li>
<li>identify how outliers and skewness affect summary statistics</li>
<li>create simple visualizations and recognize misleading plots</li>
<li>understand the limitations of manual analysis for repetitive tasks</li>
<li>import data into R and compute summaries and plots programmatically</li>
<li>safely import/export data from R (e.g.&nbsp;to CSV) with correct encoding</li>
</ul>
<p>No prior programming experience is required (we will start using R from scratch).</p>
<hr>
</section>
<section id="motivation" class="level2">
<h2 class="anchored" data-anchor-id="motivation">Motivation</h2>
<p>After structuring data properly, the next step is to make sense of it. Large tables of numbers are hard to interpret by eye. <strong>Descriptive statistics</strong> and <strong>visualizations</strong> help us summarize key properties of the data. These summaries can reveal patterns (or problems) in our Belize biodiversity dataset, guiding further analysis. Today we learn how to compute and use these summaries, first with simple tools (like Excel) and then by transitioning to R.</p>
<hr>
</section>
<section id="agenda" class="level2">
<h2 class="anchored" data-anchor-id="agenda">Agenda</h2>
<p><strong>13:30‚Äì14:15 | Block 1 ‚Äì Descriptive statistics fundamentals</strong><br>
- Recap of Day 1 data (Belize case) and need for summarizing<br>
- Measures of central tendency (mean, median and mode) and variability (range, variance)<br>
- Effects of outliers and skewed data on summaries<br>
- Understanding distributions (normal vs skewed, etc.)</p>
<p><strong>14:15‚Äì14:30 | Break</strong> ‚òïÔ∏è</p>
<p><strong>14:30‚Äì15:15 | Block 2 ‚Äì Visualizing data effectively</strong><br>
- Visualizations as summaries: ‚Äúa picture is worth a thousand numbers‚Äù<br>
- Examples of honest vs misleading plots<br>
- Best practices for clear charts (axes, labels, zero-baselines)<br>
- Repetitive analysis tasks: Excel limitations and the need for automation<br>
- Transition: why use R for data analysis?</p>
<p><strong>15:15‚Äì15:30 | Break</strong> ‚òïÔ∏è</p>
<p><strong>15:30‚Äì16:15 | Block 3 ‚Äì Hands-on: first steps in R</strong><br>
- Introduction to R and RStudio interface<br>
- Importing a CSV dataset into R<br>
- Computing summary statistics in R (e.g.&nbsp;mean, median, mode, SD)<br>
- Creating a simple plot in R (histogram or boxplot)<br>
- Exporting results (writing a CSV file)<br>
- Discussion: comparing R workflow to Excel</p>
<p><strong>16:15‚Äì16:30 | Reflection, discussion, and outlook</strong> üß†<br>
- Which summary or visualization was most insightful?<br>
- How did using R compare to using Excel?<br>
- What would you like to explore next with the data?<br>
- Preview of Day 3: introducing programming concepts in R</p>
<hr>
</section>
<section id="from-raw-data-to-summary-statistics" class="level2">
<h2 class="anchored" data-anchor-id="from-raw-data-to-summary-statistics">From raw data to summary statistics</h2>
<p>After data collection we end up with a <strong>raw dataset</strong>. The first question is: <em>what do all these numbers tell us</em>? We need to condense the data into interpretable quantities without reading every value.</p>
<p><strong>Descriptive statistics</strong> are numbers that summarize certain aspects of the data. They help describe <em>‚Äútypical‚Äù</em> values, <em>spread</em> of the data, and <em>unusual observations</em>. Crucially, these summaries simplify the data and <strong>hide detail</strong>, so they must be used carefully.</p>
<section id="measures-of-central-tendency" class="level3">
<h3 class="anchored" data-anchor-id="measures-of-central-tendency">Measures of central tendency</h3>
<p>The <strong>mean</strong> (aka average) and <strong>median</strong> are two common measures of the ‚Äúcenter‚Äù of a numeric dataset:</p>
<ul>
<li><p><strong>Mean (<span class="math inline">\(\bar{x}\)</span>):</strong> the sum of all values divided by the number of values. For data points <span class="math inline">\(x_1, x_2, ..., x_n\)</span>, the mean is<br>
<span class="math display">\[\bar{x} = \frac{1}{n}\sum_{i=1}^{n} x_i.\]</span><br>
Example: If five trees have heights (in m) 8, 10, 6, 9, 7, the mean height is <span class="math inline">\((8+10+6+9+7)/5 = 40/5 = 8\)</span> m.</p></li>
<li><p><strong>Median:</strong> the middle value when data are sorted from smallest to largest. If <span class="math inline">\(n\)</span> is odd, the median is the middle data point; if <span class="math inline">\(n\)</span> is even, it is the average of the two middle values.<br>
Example: For the tree heights 6, 7, 8, 9, 10 (sorted order), the median is 8 m (the third value). If we had an even number of trees, say heights 6, 7, 8, 10 (four values), the median would be the average of the two middle values (7 and 8), which is 7.5 m.</p></li>
</ul>
<p>The mean and median both tell us about the ‚Äúcentral‚Äù value of the data, but they respond differently to extreme values. The <strong>mean</strong> is influenced by <strong>outliers</strong> (very high or low values), whereas the <strong>median</strong> is more robust in skewed distributions.</p>
<ul>
<li><strong>Mode:</strong> the most frequently occurring value in the dataset. This is less commonly used for continuous data but can be informative for categorical data (e.g., most common species observed).</li>
</ul>
<div class="external-figure">
<p><strong>Visualisation mode median mean</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/33/Visualisation_mode_median_mean.svg/960px-Visualisation_mode_median_mean.svg.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Geometric visualisation of the multiple statistics</figcaption>
</figure>
</div>
<div class="figure-source">
<p>Source: <a href="https://en.wikipedia.org/wiki/File:Visualisation_mode_median_mean.svg" target="_blank" rel="noopener">Wikimedia Commons</a></p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solo Exercise: Calculate the mean (aka average), median and mode for three distributions (7 min)
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Open one of the regionalized files in Excel (three numeric columns A, B, C, 100 rows each):</li>
</ol>
<ul>
<li><code>data/raw/csv/dist_day02_sep_semicolon__dec_comma.csv</code> (German settings: semicolon separator, comma decimal) ‚Üí loads cleanly if your decimal is <code>,</code></li>
<li><code>data/raw/csv/dist_day02_sep_comma__dec_dot.csv</code> (US/UK settings: comma separator, dot decimal) ‚Üí if your regional decimal is <code>,</code>, tell Excel to keep dot as decimal One way is over Power Query import First on Home ‚Üí Use First Row as Headers Delete the automatic conversion, did you notices it changed the values Select all columns clicking the first one, then shift and then the last one. Right Click ‚Üí Change Type ‚Üí Using Locale ‚Üí Data Type [Decimal] ‚Üí Locale English (Europe)</li>
</ul>
<p>As we learned, the other way is to copy the data (from Notepad or Notebook++) and paste it into Excel. Then on <strong>Data ‚Üí Text to Columns ‚Üí‚Ä¶ and at the end select Advanced</strong> There, set decimal separator to <code>.</code>).</p>
<ol start="2" type="1">
<li>For each variable (A, B, C), calculate the mean, median and mode using Excel functions:</li>
</ol>
<ul>
<li>Mean: <code>=AVERAGE(range)</code> (German Excel: <code>=MITTELWERT(Bereich)</code>)</li>
<li>Median: <code>=MEDIAN(range)</code> (German Excel: <code>=MEDIAN(Bereich)</code>)</li>
<li>Mode: <code>=MODE(range)</code> (German Excel: <code>=MODUS.EINF(Bereich)</code>; older versions: <code>=MODUS(Bereich)</code>)</li>
</ul>
<p>You can do this selecting a cell range with your mouse or typing it in (e.g.&nbsp;<code>A2:A101</code> for column A) or using named ranges.</p>
<ol start="3" type="1">
<li>Keep it open for later exercises.</li>
</ol>
</div>
</div>
</section>
<section id="measures-of-variability" class="level3">
<h3 class="anchored">Measures of variability</h3>
<p>A single center value is not enough; we also need to know how spread out the data are:</p>
<ul>
<li><p><strong>Range:</strong> the difference between the maximum and minimum values. It tells us the span of the data (but can be skewed by outliers).</p></li>
<li><p><strong>Outliers</strong> are extreme values that differ significantly from other observations. For example, if tree heights range from 5 m to 50 m, a tree of height 150 m can be considered an outlier.</p></li>
<li><p><strong>Variance (<span class="math inline">\(s^2\)</span>)</strong> measure the typical deviation of data points from the mean. Variance is defined as<br>
<span class="math display">\[s^2 = \frac{1}{n-1}\sum_{i=1}^{n} (x_i - \bar{x})^2,\]</span></p></li>
<li><p><strong>Standard Deviation (<span class="math inline">\(s\)</span>)</strong> the square root of the variance. It is in the same units as the data and gives a sense of typical deviation from the mean. <span class="math inline">\(s = \sqrt{s^2}\)</span>. A high standard deviation means values are widely scattered around the mean; a low standard deviation means they are tightly clustered.</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Note</strong> that standard deviation is the square root of variance. This changes the units:</p>
<ul>
<li><strong>Variance</strong> has <strong>squared units</strong>: e.g.&nbsp;m(^2), mm(^2), individuals(^2)</li>
<li><strong>Standard deviation</strong> has the <strong>same units as the data</strong>: e.g.&nbsp;m, mm, individuals</li>
</ul>
<p>When interpreting, standard deviation is often more intuitive because it is in the same units as the original data. Variance, however, is harderd to interpret directly bacause of squared units but is algebraically convenient and often used in statistical modeling.</p>
<p>Variance has clean additivity (under independence):</p>
<p>[ (X+Y) = (X) + (Y) X Y ]</p>
<p>Standard deviations do <strong>not</strong> add:</p>
<p>[ + ]</p>
<p>That is why models tend to run on <strong>variance</strong>, not SD.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solo Exercise: Calculate variance and standard deviation for the three distributions (5 min)
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Using the same dataset (pick the same file as above)</li>
<li>For each variable (A, B, C), calculate the variance and standard deviation using Excel functions:</li>
</ol>
<ul>
<li>Variance: <code>=VAR.S(range)</code> (German Excel: <code>=VARI.S(Bereich)</code>)</li>
<li>Standard Deviation: <code>=STDEV.S(range)</code> (German Excel: <code>=STABW.S(Bereich)</code>)</li>
<li>Range: <code>=MAX(range)-MIN(range)</code> (German Excel: <code>=MAX(Bereich)-MIN(Bereich)</code>)</li>
</ul>
<ol start="3" type="1">
<li>Keep it open for later exercises.</li>
</ol>
<p>Whay did this show you more about the data?</p>
</div>
</div>
<ul>
<li><p><strong>Percentiles/Quartiles:</strong> values that divide the data into 100 (percentiles) or 4 (quartiles) equal parts. The 25th percentile (Q1) is the value below which 25% of data fall; the 75th percentile (Q3) is the value below which 75% of data fall. <strong>Median</strong> is the 50th percentile (Q2).</p></li>
<li><p><strong>Interquartile Range (IQR):</strong> the difference between the 75th percentile (Q3) and 25th percentile (Q1). This focuses on the spread of the middle 50% of data, giving a robust spread measure less affected by outliers.</p></li>
</ul>
<p>For example, if the diameter at breast height (DBH) of trees in Plot A have a mean of 30 cm and a standard deviation of 5 cm, most tree DBHs are around 30 cm ¬± 5 cm. In Plot B, a mean of 30 cm but standard deviation of 15 cm would imply much greater variability (some saplings and some very large trees).</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Sensitivity to outliers
</div>
</div>
<div class="callout-body-container callout-body">
<p>Both variance and SD use squared deviations, so both are <strong>sensitive to outliers</strong>.</p>
<p>If robustness matters, prefer: - IQR (interquartile range) - Quantiles</p>
<p>P.S.: robustness meaning ‚ÄúHow strongly a statistic reacts to small violations of its assumptions, especially the presence of outliers, skewness, or heavy tails‚Äù Variance and standard deviation use squared deviations. Squaring is a megaphone. One extreme value gets amplified enormously.</p>
<section id="common-mistakes" class="level2">
<h2 class="anchored" data-anchor-id="common-mistakes">Common mistakes</h2>
<ul>
<li>Reporting variance in reader-facing summaries</li>
<li>Treating mean () SD as a confidence interval (it is not)</li>
<li>Comparing SDs across groups with very different distributions and pretending it is apples-to-apples</li>
<li>Using SD for strongly skewed data without also reporting quantiles</li>
</ul>
</section>
</div>
</div>
</section>
<section id="the-effect-of-outliers-and-skewness" class="level3">
<h3 class="anchored" data-anchor-id="the-effect-of-outliers-and-skewness">The effect of outliers and skewness</h3>
<p>Outliers (values that are very high or low relative to the rest) can heavily distort certain statistics. In ecology, suppose most trees in a sample are under 10 m tall, but one giant ceiba tree is 50 m tall. The mean tree height will be pulled upward by this one extreme value, whereas the median will barely change (since the median only cares about the middle-ranked value).</p>
<p>In our Belize forest data, if one plot had an anomalously high tree height count due to an observational/data entry error, the mean count would give a misleading impression of typical conditions. Always consider whether outliers are errors, natural rare events, or indications of underlying heterogeneity. Depending on context, you might report the median instead of the mean for skewed data, or even remove obvious data errors.</p>
<p>To gauge skewness and outliers, it‚Äôs useful to look at the whole <strong>distribution</strong> of the data, not just single summary numbers. This brings us to visualizing data.</p>
<hr>
</section>
</section>
<section id="distributions-and-visual-summaries" class="level2">
<h2 class="anchored" data-anchor-id="distributions-and-visual-summaries">Distributions and visual summaries</h2>
<p>A <strong>distribution</strong> describes how frequently each value (or range of values) occurs in the dataset. Two datasets can have the same mean and variance yet be distributed very differently. Plotting the data often reveals patterns (multiple peaks, skew, outliers) that summary statistics alone might miss.</p>
<p>For example, consider <strong>Anscombe‚Äôs quartet</strong> ‚Äì four different datasets that have the <em>exact same</em> mean, median, and variance, but very different arrangements of points when graphed. A visual comparison makes the differences obvious:</p>
<div class="external-figure">
<p><strong>Four datasets with identical summary statistics (mean, variance, correlation, etc.), but very different patterns when plotted. This classic example (Anscombe 1973) shows why visualizing data is crucial</strong>: summary statistics alone can be insufficient</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://www.researchgate.net/publication/312487350/figure/fig3/AS:11431281185543963@1693666381839/Anscombes-quartet-of-different-XY-plots-of-four-data-sets-having-identical-averages.ppm" class="img-fluid figure-img"></p>
<figcaption>Anscombe‚Äôs quartet</figcaption>
</figure>
</div>
<div class="figure-source">
<p>Source: <a href="https://doi.org/10.1108/978-1-78560-461-420152004?urlappend=%3Futm_source%3Dresearchgate.net%26utm_medium%3Darticle" target="_blank" rel="noopener">Woodside et al 2016</a></p>
</div>
</div>
<section id="the-role-of-visualization" class="level3">
<h3 class="anchored" data-anchor-id="the-role-of-visualization">The role of visualization</h3>
<p>Graphs provide a shorthand for understanding data. By plotting our Belize dataset, we can quickly see trends and anomalies. Common plot types for quantitative data include:</p>
<ul>
<li><strong>Histograms:</strong> show the distribution of a single numeric variable by grouping values into bins.</li>
<li><strong>Box plots:</strong> show median, quartiles, and outliers, giving a quick summary of distribution and spread.</li>
<li><strong>Scatter plots:</strong> show relationships between two numerical variables (e.g.&nbsp;tree height vs.&nbsp;tree diameter).</li>
<li><strong>Bar charts:</strong> summarize categorical data (e.g.&nbsp;mean value per category).</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Data format and plotting workflows in Excel</strong></p>
<section id="histogram" class="level3">
<h3 class="anchored" data-anchor-id="histogram">Histogram</h3>
<p><em>Distribution of a single numeric variable</em></p>
<ol type="1">
<li>Select the numeric column (e.g.&nbsp;<code>DBH_cm</code>)</li>
<li><strong>Insert ‚Üí Statistic Chart ‚Üí Histogram</strong> (German Excel: <strong>Einf√ºgen ‚Üí Diagramme ‚Üí Statistikdiagramm ‚Üí Histogramm</strong>)</li>
<li>Right-click x-axis ‚Üí <strong>Format Axis</strong>
<ul>
<li>Set bin width or number of bins</li>
</ul></li>
</ol>
</section>
<section id="box-plot" class="level3">
<h3 class="anchored" data-anchor-id="box-plot">Box plot</h3>
<p><em>Median, quartiles, and outliers</em></p>
<ol type="1">
<li>Select the numeric column</li>
<li><strong>Insert ‚Üí Statistic Chart ‚Üí Box &amp; Whisker</strong> (German Excel: <strong>Einf√ºgen ‚Üí Diagramme ‚Üí Statistikdiagramm ‚Üí Kastendiagramm (Box &amp; Whisker)</strong>)</li>
<li>Excel applies Tukey‚Äôs rule automatically. Meaning: ‚Äì The box spans the interquartile range (Q1 to Q3) ‚Äì The whiskers extend to the most extreme values within Q1-1.5IQR and Q3+1.5IQR ‚Äì Outliers are any points beyond the whiskers</li>
</ol>
</section>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solo Exercise: Plot a historgram and a boxplot for each if the three distributions (10 min)
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Using the same dataset (pick the same file as above that matches your regional separators/decimals)</li>
<li>For each variable (A, B, C), create a histogram using Excel:
<ul>
<li>Select the column</li>
</ul></li>
</ol>
<ul>
<li><strong>Insert ‚Üí Statistic Chart ‚Üí Histogram</strong> (German Excel: <strong>Einf√ºgen ‚Üí Diagramme ‚Üí Statistikdiagramm ‚Üí Histogramm</strong>)</li>
<li>Adjust bin width if needed (e.g.&nbsp;to 2) via right-click on x-axis ‚Üí <strong>Format Axis</strong></li>
</ul>
<p>Much easier to see the distribution this way, right?</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Scatter plot
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>Relationship between two numeric variables</em></p>
<ol type="1">
<li>Select both numeric columns</li>
<li><strong>Insert ‚Üí Scatter ‚Üí Scatter with only markers</strong> (German Excel: <strong>Einf√ºgen ‚Üí Punkt (X Y) ‚Üí Punkte (nur Marker)</strong>)</li>
<li>Add axis labels and optional trendline</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Group exercise: Do a scatter plot of DBH and Height (7 min)
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Open a new Excel instance</li>
<li>Load the Belize dataset <a href="https://github.com/ohagen/course_DigitalCompetenceInTheBiologicalSciences/blob/main/data/raw/PSP/PSP_NPD847_OH.xlsx"><code>data/raw/PSP/PSP_NPD847_OH.xlsx</code></a> Before plotting, think, how should a scatter plot of DBH vs Height look like? What relationship do you expect?</li>
<li>Select the columns <code>DBH</code> and <code>Height</code></li>
<li><strong>Insert ‚Üí Scatter ‚Üí Scatter with only markers</strong></li>
</ol>
<p><em>Bonus</em> 1. Make this plot at the Analysis sheet (not raw data) 2. Add a trendline via right-click on a point ‚Üí <strong>Add Trendline‚Ä¶</strong> 3. Choose Linear and logarithmic options 4. Add equation and R-squared value to the chart</p>
<blockquote class="blockquote">
<p>R-squared (R¬≤) is a statistical measure of how well a regression model fits your data. It answers the question: ‚ÄúHow much of the variation in the outcome (Y) can be explained by the predictor(s) (X)?‚Äù If 0 model explains none of the variation, if 1.0 it explains all the variation (perfect fit) <strong>Note</strong> A high R¬≤ does not mean the model is good‚Ä¶ in biology, natural variation is high. R¬≤ ignores bias and overfitting. Use diagnostics and validation too.</p>
</blockquote>
<p>What is the relationship between DBH and Height in this dataset? Does it match your expectation?</p>
</div>
</div>
<p>A good visualization <strong>summarizes</strong> the data (like statistics do) but in a more intuitive way. It is not ‚Äúproof‚Äù of a hypothesis by itself, but it helps us explore and communicate what the data are saying.</p>
</section>
<section id="honest-versus-misleading-plots" class="level3">
<h3 class="anchored" data-anchor-id="honest-versus-misleading-plots">Honest versus misleading plots</h3>
<p>Not all charts are created equal. It‚Äôs easy to mislead with visuals, intentionally or not. One common pitfall is manipulating the <strong>axes</strong> to exaggerate or downplay differences or showing only a narrow range on the y-axis can make a tiny difference look huge.</p>
<div class="external-figure">
<p><strong>Misleading Data Visualizations</strong>: From mistakes to fraud, bad graphs can distort the truth.</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*VPRpf0YnchAwN0mjeAz4pA.jpeg" class="img-fluid quarto-figure quarto-figure-center" alt="Did they decline?"> <img src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*r6UEzbZblBJyzrdfYm7Qeg.jpeg" class="img-fluid quarto-figure quarto-figure-center" alt="PS3 so much better?"> <img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JkPIGjEsBfoqPlEn41_xpw.jpeg" class="img-fluid quarto-figure quarto-figure-center" alt="How much improve?"></p>
<div class="figure-source">
<p>Source: <a href="https://medium.com/@Ana_kin/graphs-gone-wrong-misleading-data-visualizations-d4805d1c4700" target="_blank" rel="noopener">Ana Kin 2023 - Medium</a></p>
</div>
</div>
<p>When creating plots, follow these best practices: - <strong>Start axes at zero</strong> for bar charts (so heights are proportional to values). Only truncate axes if necessary for clarity, and clearly indicate breaks if used. - <strong>Label axes and units</strong> clearly. A viewer should know what the x and y values represent. - <strong>Avoid ‚Äúchart junk‚Äù</strong> ‚Äì unnecessary 3D effects, excessive colors, or anything that distracts from the data. - <strong>Use appropriate plot types:</strong> e.g.&nbsp;don‚Äôt use a pie chart if you have many categories (it becomes hard to read). - <strong>Be honest with visual encodings:</strong> for example, if doubling area in a pictogram, ensure area truly corresponds to value (our brains interpret area non-linearly, so this can mislead).</p>
<p>In Excel, creating a basic chart (Insert ‚Üí Chart) is straightforward, but be cautious: Excel might auto-format charts in ways that aren‚Äôt ideal (e.g., truncated axes or confusing legends). Always review and tweak the default settings to ensure clarity and honesty.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Beware of accidental distortion:</strong> Even well-meaning choices, like using a logarithmic scale or excluding outliers for clarity, can confuse or mislead if not communicated. Always caption or annotate your plots to make such choices clear.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Group exercise: Visualize data in Excel (10 minutes)</strong></p>
<p>Using the Belize and Amazon dataset create: - One histogram - One box plot - One scatter plot - One bar chart (using a PivotTable)</p>
</div>
</div>
<hr>
</section>
</section>
<section id="when-excel-falls-short-repetition-and-scalability" class="level2">
<h2 class="anchored" data-anchor-id="when-excel-falls-short-repetition-and-scalability">When Excel falls short: repetition and scalability</h2>
<p>If you have a small dataset, you can calculate means or make a plot in Excel by hand without much trouble. But what if you have dozens of variables or need to repeat the same calculation for multiple groups? This is where Excel becomes tedious and error-prone, and why we turn to <strong>R</strong>.</p>
<p>Imagine you have species count data for 50 different areas and you want the average count for each species in each area. In Excel, you might set up a complex grid of formulas or create 50 separate pivot tables ‚Äì a process that is both time-consuming and fragile (any new data or slight change, and you must update everything manually). In R, you could compute all those summaries with a few lines of code that can be reused anytime the data updates.</p>
<p><strong>Reproducibility:</strong> Another limitation of point-and-click analysis is that it‚Äôs hard to retrace or repeat exactly. If someone asks ‚ÄúHow did you get this number?‚Äù, you might have to recall a sequence of steps you did in Excel. In R, every step is scripted, so you (and others) can always check the code to see how a result was obtained and rerun it on new data.</p>
<p><strong>Accuracy:</strong> Manual work is prone to mistakes (copy-paste errors, wrong cell ranges, etc.). By writing an explicit script, you reduce the risk of such errors, especially when tasks are repetitive.</p>
<p>Excel does have tools like <strong>PivotTables</strong> and formulas that can automate some analyses. PivotTables, for example, allow quick grouping and summarizing of data by categories (e.g.&nbsp;mean count per species per site). We used some Excel features on Day 1 to structure data. However, for complex or repetitive tasks, maintaining many pivots and formulas can become a nightmare of cross-references and as we saw, error susceptible. R, by contrast, is great at handling repetition: you can loop through all species or use vectorized operations to compute results for all groups in one go.</p>
<p>In summary, Excel is often the easiest for one-off calculations or small tasks, but R is better for automating analyses, handling larger datasets, and ensuring reproducibility. Next, we‚Äôll get hands-on with R and perform some of the same summaries and plots we did in Excel ‚Äì but faster and in a way that scales up.</p>
<hr>
</section>
<section id="first-steps-in-r" class="level2">
<h2 class="anchored" data-anchor-id="first-steps-in-r">First steps in R</h2>
<p>R is a programming language and environment specifically designed for data analysis and statistics. We will use R through <strong>RStudio</strong>, a user-friendly interface.</p>
<p>To follow along:</p>
<ol type="1">
<li><p><strong>Open RStudio.</strong> You‚Äôll see the Console in one pane and possibly an empty script editor in another. You can type R commands directly into the Console, or write a script in the editor pane and run it.</p></li>
<li><p><strong>Create a new R script:</strong> Go to <em>File ‚Üí New File ‚Üí R Script</em>. This allows you to save a record of your commands (which is great for reproducibility).</p></li>
</ol>
<section id="importing-a-dataset-into-r" class="level3">
<h3 class="anchored" data-anchor-id="importing-a-dataset-into-r">Importing a dataset into R</h3>
<p>We will start by importing a CSV file of data (for example, the tree measurement dataset we structured on Day 1). In Excel, we opened this file by double-clicking or via <em>Data ‚Üí Import</em>. In R, we use a function call.</p>
<p>Assuming the CSV file is saved as <code>data/raw/trees.csv</code> (just as an example path), we can read it into R with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the CSV file into a data frame (tabular structure in R)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>trees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/raw/csv/Caxiuana_tree_trait_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This command loads the data into a variable named trees. By default, read.csv assumes the file has a header row for column names, values are separated by commas, and text is encoded in UTF-8 (which is standard for most CSVs). If our data used a different delimiter (like tab \t in a TSV file), we could use read.delim or specify sep=‚Äú\t‚Äù. One big advantage: R will <strong>not</strong> automatically mangle our data the way Excel might. For instance, if there were gene names like ‚ÄúSEP2‚Äù or ‚ÄúMAR1‚Äù, R will keep them as text, whereas Excel might have turned them into dates or numbers. In R, data types are explicit ‚Äì we can tell R a column is text, numeric, etc., or let it guess (which it usually does correctly if the file is well-formatted).</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Tip:</strong> If your data contains special characters (like ‚Äú√ü‚Äù or ‚Äú√±‚Äù), ensure you use the correct encoding. read.csv(‚Ä¶, fileEncoding=‚ÄúUTF-8‚Äù) will handle most cases. This prevents issues where characters turn into gibberish due to encoding mismatches.</p>
</div>
</div>
</section>
<section id="summarizing-data-in-r" class="level3">
<h3 class="anchored" data-anchor-id="summarizing-data-in-r">Summarizing data in R</h3>
<p>Now that our data is in R as a data frame (trees in the example), we can compute the same summary statistics as before:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic summaries</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(trees<span class="sc">$</span>DBH)      <span class="co"># mean of tree diameters</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(trees<span class="sc">$</span>DBH)    <span class="co"># median</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(trees<span class="sc">$</span>DBH)        <span class="co"># standard deviation</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(trees<span class="sc">$</span>DBH)     <span class="co"># min and max</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(trees<span class="sc">$</span>DBH)  <span class="co"># quartiles</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic plots</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(trees<span class="sc">$</span>DBH)      <span class="co"># histogram of diameters</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(trees<span class="sc">$</span>DBH)   <span class="co"># boxplot of diameters</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(trees<span class="sc">$</span>DBH, trees<span class="sc">$</span>Mean.Growth)  <span class="co"># scatter plot of DBH vs growth</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The functions mean(), median(), sd() (standard deviation), range() and others do the math for us. By default, these will return NA (Not Available) if any missing values are in the data. To ignore missing values (NA) in calculations, we add an argument like na.rm=TRUE (e.g., mean(trees$dbh_cm, na.rm=TRUE)). For a quick overview of an entire data frame, R has the handy summary() function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mean of vector with NA</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>vect <span class="ot">&lt;-</span> trees<span class="sc">$</span>Mean.Growth</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vect)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vect, <span class="at">na.rm=</span><span class="cn">TRUE</span>)  <span class="co"># ignore NAs</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of all columns</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(trees)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>summary(trees) outputs, for each column, some summary info (for numeric columns: min, Q1, median, mean, Q3, max; for factors or characters: a preview of values or counts). It‚Äôs an instant way to see the shape of your data. If we have categorical variables (e.g.&nbsp;species or site name), we might want to see counts or group-wise summaries. In R, it‚Äôs easy to do by grouping the data. For instance, to get the mean dbh_cm per species:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mean DBH per species</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>meanDBH <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(DBH <span class="sc">~</span> Species, <span class="at">data =</span> trees, <span class="at">FUN =</span> mean)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># report number of observations per species</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>count <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(DBH <span class="sc">~</span> Species, <span class="at">data =</span> trees, <span class="at">FUN =</span> length)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># merge summaries</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>summary_table <span class="ot">&lt;-</span> <span class="fu">merge</span>(meanDBH, count, <span class="at">by=</span><span class="st">"Species"</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(summary_table) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Species"</span>, <span class="st">"Mean_DBH"</span>, <span class="st">"Count"</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># exclude species with less than 5 observations</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>subset_summary_table <span class="ot">&lt;-</span> <span class="fu">subset</span>(summary_table, Count <span class="sc">&gt;=</span> <span class="dv">5</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#or alternatively</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>subset_summary_table <span class="ot">&lt;-</span> summary_table[summary_table<span class="sc">$</span>Count <span class="sc">&gt;=</span> <span class="dv">5</span>, ]</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co"># or alternatively using dplyr package</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)  <span class="co"># run this line once to install dplyr</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>subset_summary_table <span class="ot">&lt;-</span> <span class="fu">filter</span>(summary_table, Count <span class="sc">&gt;=</span> <span class="dv">5</span>)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co"># or alternatively</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>subset_summary_table <span class="ot">&lt;-</span> summary_table <span class="sc">|&gt;</span>  <span class="fu">filter</span>(Count <span class="sc">&gt;=</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This single line replaces what might be a complex PivotTable in Excel, giving us a table of mean diameters for each species in our dataset. We‚Äôll explore more powerful grouping and summarizing (with the <strong>dplyr</strong> package) on later days, but this shows the idea.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Group exercise: Summarize and plot in R (15 min)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Work in pairs (one ‚Äúdriver‚Äù at the keyboard, one ‚Äúnavigator‚Äù guiding):</p>
<ol type="1">
<li>Load the dataset <a href="https://github.com/ohagen/course_DigitalCompetenceInTheBiologicalSciences/blob/main/data/raw/csv/Caxiuana_tree_trait_data.csv"><code>csv/Caxiuana_tree_trait_data.csv</code></a> into R.</li>
</ol>
<p>Alternatively, load the Excel file <a href="https://github.com/ohagen/course_DigitalCompetenceInTheBiologicalSciences/blob/main/data/raw/Foresty/PLOT_Data_2020/PLOT_2016.10_2020.xlsx">Foresty/PLOT_Data_2020/PLOT_2016.10_2020.xlsx</a> into R. For this, you will need a package, i.e.&nbsp;<em>openxls</em> to load a .xlsx file, specifically the read.xlsx() function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"openxlsx"</span>)  <span class="co"># run this line once to install openxlsx</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>fplot <span class="ot">&lt;-</span> <span class="fu">read.xlsx</span>(<span class="st">"./data/raw/Foresty/PLOT_Data_2020/PLOT_2016.10_2020.xlsx"</span>,<span class="at">sheet=</span><span class="dv">1</span>, <span class="at">startRow=</span><span class="dv">9</span>)[<span class="sc">-</span><span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Try to figure out what this is doing!</p>
<ol start="2" type="1">
<li><p>Using R, calculate the mean and median of a key variable across all observations.</p></li>
<li><p>Create a histogram and a boxplot.</p></li>
<li><p>Discuss with your partner: Do the mean and median differ notably? What does that tell you about the distribution (skewness or outliers)? Did you intuition matched what you saw on the histogram?</p></li>
</ol>
<p><em>Switch roles (driver/navigator) halfway through.</em> This exercise gives you first-hand experience with R‚Äôs commands. Don‚Äôt worry if you get stuck ‚Äì use ?functionName (e.g.&nbsp;?mean) to access R‚Äôs help, or ask an instructor for a hint. Soon we will dive deeper</p>
</div>
</div>
</section>
<section id="exporting-data-and-results" class="level3">
<h3 class="anchored" data-anchor-id="exporting-data-and-results">Exporting data and results</h3>
<p>Just as important as reading data into R is writing it out. If you cleaned or summarized data in R, you might want to save it as a CSV to share or to use in a report:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(trees, <span class="st">"data/clean/trees_clean.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This would save our trees data frame to a new CSV file (without including row numbers as an extra column). By default, write.csv writes in UTF-8 encoding on most systems, which will preserve special characters. R can also save plots to files (PNG, PDF, etc.). Another powerful approach is to use R Markdown or Quarto (as we are doing for these course materials) to integrate text, code, and plots in one reproducible document. We will delve into that on Day 4. For now, the key point is: with a few lines of code, we imported data, computed summaries, made plots, and saved outputs. Once written, we can reuse this code anytime with new data, ensuring consistent analysis. This is a taste of what‚Äôs possible as we move further into R.</p>
<hr>
</section>
</section>
<section id="wrap-up" class="level2">
<h2 class="anchored" data-anchor-id="wrap-up">Wrap-up</h2>
<p>Today we learned how to describe and visualize data, transitioning from manual Excel steps to automated R scripts. Descriptive statistics like mean, median, and standard deviation condense data into understandable numbers, while visualizations reveal patterns and anomalies that numbers alone might hide. We also saw the first glimpses of R‚Äôs capabilities ‚Äì from reading data to making a plot in seconds. By summarizing the Belize case study data, we gained insight into typical values and variability (e.g., average tree sizes, distribution of observations across sites). We also confronted how misleading it can be if we rely on a single number or a poorly crafted chart. In the next session, we‚Äôll build on this foundation by asking: <em>How can we automate analyses and go beyond what spreadsheets allow?</em> This will lead us deeper into the world of programming (using R) ‚Äì writing instructions to let the computer handle repetitive tasks and complex logic, which is our focus for Day 3. Feel free to practice more with R on your own: try computing stats or making charts for other variables in the dataset. The more you play with the data, the more familiar you will become with R.</p>
<hr>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you switch between regions: both CSV variants of <code>dist_day02</code> load cleanly <strong>when the separator and decimal match your settings</strong>. In R, set <code>sep</code> and <code>dec</code> explicitly (see below) and both files produce the same numeric results. In Excel, either pick the semicolon/comma file when your decimal is <code>,</code>, or if you open the comma/dot file under a comma-decimal locale, use Power Query or <strong>Data ‚Üí Text to Columns ‚Üí Advanced</strong> and set decimal separator to <code>.</code> so numbers are parsed correctly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Read CSV with different separators/decimals; both give identical data when sep/dec match</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"./data/raw/csv/dist_day02_sep_comma__dec_dot.csv"</span>), <span class="at">sep=</span><span class="st">","</span>, <span class="at">dec=</span><span class="st">"."</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"./data/raw/csv/dist_day02_sep_semicolon__dec_comma.csv"</span>), <span class="at">sep=</span><span class="st">";"</span>, <span class="at">dec=</span><span class="st">","</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(tab)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>buffer <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(tab<span class="sc">$</span>A, <span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">min</span>(tab)<span class="sc">-</span>buffer,<span class="fu">max</span>(tab)<span class="sc">+</span>buffer))</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(tab<span class="sc">$</span>B, <span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">min</span>(tab)<span class="sc">-</span>buffer,<span class="fu">max</span>(tab)<span class="sc">+</span>buffer))</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(tab<span class="sc">$</span>C, <span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">min</span>(tab)<span class="sc">-</span>buffer,<span class="fu">max</span>(tab)<span class="sc">+</span>buffer))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflection
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Which statistic or visualization surprised you?</li>
<li>How was your first experience using R? What was challenging, and what felt easier or more powerful than using Excel?</li>
<li>What would you like to explore next with R or data analysis? If you can, please take a moment to provide feedback on today‚Äôs session:</li>
<li><a href="https://docs.google.com/forms/d/e/1FAIpQLSdAzUAXHUIdY2JOAMiQ_liL_GUp2oEA9uzP_alRfSGM9r02wQ/viewform?usp=publish-editor">Anonymous feedback</a></li>
</ul>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>